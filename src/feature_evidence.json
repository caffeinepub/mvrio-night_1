{
  "kind": "feature_evidence_report",
  "features": [
    {
      "featureId": "feature-fix-the-global-auth-state-so-the-app-correctly-treats-an-internet-identity-signed-in-user-as-authenticated-for-all-restricted-actions-like-add-to-favorites-create-playlist-add-to-playlist-offline-cache-device-download-messaging-preventing-the-soft-sign-in-modal-from-appearing-when-the-sidebar-already-shows-the-user-is-logged-in",
      "featureTitle": "Fix the global auth state so the app correctly treats an Internet Identity signed-in user as authenticated for all restricted actions (Like, Add to Favorites, Create Playlist, Add to Playlist, offline cache, device download, messaging), preventing the soft sign-in modal from appearing when the sidebar already shows the user is logged in.",
      "files": [
        "frontend/src/components/songs/SongOverflowMenu.tsx",
        "frontend/src/context/AuthContext.tsx",
        "frontend/src/hooks/usePendingAction.ts"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "blob-storage@4.0.0",
        "authorization@4.0.0"
      ],
      "testIds": [
        "REQ-199"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-update-frontend-src-context-authcontext-tsx-so-isauthenticated-is-derived-from-the-actual-internet-identity-state-useinternetidentity-identity-rather-than-being-hard-coded-false-and-ensure-the-authcontext-stays-in-sync-when-identity-changes-login-logout",
      "featureTitle": "Update `frontend/src/context/AuthContext.tsx` so `isAuthenticated` is derived from the actual Internet Identity state (`useInternetIdentity().identity`) rather than being hard-coded false, and ensure the AuthContext stays in sync when identity changes (login/logout).",
      "files": [
        "frontend/src/context/AuthContext.tsx"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "blob-storage@4.0.0",
        "authorization@4.0.0"
      ],
      "testIds": [
        "REQ-200"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-fix-the-soft-sign-in-modal-sign-in-with-internet-identity-button-so-it-reliably-triggers-the-internet-identity-login-flow-and-does-not-appear-stuck-no-op-when-tapped-clicked-ensure-the-modal-closes-automatically-when-authentication-succeeds-and-does-not-immediately-re-open-for-the-same-action-once-signed-in",
      "featureTitle": "Fix the soft sign-in modal \"Sign In with Internet Identity\" button so it reliably triggers the Internet Identity login flow and does not appear “stuck” (no-op) when tapped/clicked. Ensure the modal closes automatically when authentication succeeds and does not immediately re-open for the same action once signed in.",
      "files": [
        "frontend/src/components/SignInModal.tsx",
        "frontend/src/context/AuthContext.tsx"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "blob-storage@4.0.0",
        "authorization@4.0.0"
      ],
      "testIds": [
        "REQ-201"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-ensure-pending-restricted-actions-complete-correctly-after-successful-authentication-when-a-restricted-action-triggers-requireauth-after-sign-in-succeeds-the-app-retries-the-pending-action-once-and-then-clears-pending-state-so-the-modal-does-not-reappear-for-subsequent-actions",
      "featureTitle": "Ensure pending restricted actions complete correctly after successful authentication: when a restricted action triggers `requireAuth(...)`, after sign-in succeeds the app retries the pending action once and then clears pending state so the modal does not reappear for subsequent actions.",
      "files": [
        "frontend/src/components/library/LibraryPlaylistsPanel.tsx",
        "frontend/src/components/songs/CreatePlaylistDialog.tsx",
        "frontend/src/components/songs/PlaylistChooserDialog.tsx",
        "frontend/src/context/AuthContext.tsx",
        "frontend/src/hooks/usePendingAction.ts"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "blob-storage@4.0.0",
        "authorization@4.0.0"
      ],
      "testIds": [
        "REQ-202"
      ],
      "confidence": "high"
    },
    {
      "featureId": "feature-standardize-restricted-action-routing-to-requireauth-only-when-the-user-is-truly-unauthenticated-anonymous-or-when-the-backend-returns-a-sign-in-required-error-do-not-route-signed-in-users-into-the-soft-sign-in-flow-for-non-auth-issues-keep-user-facing-text-in-english",
      "featureTitle": "Standardize restricted-action routing to `requireAuth(...)` only when the user is truly unauthenticated (anonymous) or when the backend returns a sign-in-required error; do not route signed-in users into the soft sign-in flow for non-auth issues. Keep user-facing text in English.",
      "files": [
        "frontend/src/components/library/LibraryPlaylistsPanel.tsx",
        "frontend/src/components/songs/CreatePlaylistDialog.tsx",
        "frontend/src/components/songs/PlaylistChooserDialog.tsx",
        "frontend/src/components/songs/SongOverflowMenu.tsx"
      ],
      "components": [
        "core-infrastructure@1.0.2",
        "shadcn-ui@1.0.0",
        "build-template-react@1.0.0",
        "initial-app@1.0.0",
        "github-export-icp-cli@1.0.0",
        "blob-storage@4.0.0",
        "authorization@4.0.0"
      ],
      "testIds": [
        "REQ-203"
      ],
      "confidence": "high"
    }
  ]
}